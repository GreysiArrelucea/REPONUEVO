#!/usr/bin/env python
# coding: utf-8

# # REPORTE 1

# Nombre: Greysi Milagros Arrelucea Casta√±eda

# ## Lectura

# A partir de los objetivos del presente art√≠culo, es posible identificar la siguiente pregunta de investigaci√≥n principal: ¬øCu√°les fueron los efectos recesivos e inflacionarios del shock externo negativo en la econom√≠a peruana durante el 2014-15? Asimismo, el art√≠culo tambi√©n formula preguntas de investigaci√≥n secundarias que contribuyen en la respuesta de la pregunta principal: ¬øCu√°les fueron las pol√≠ticas fiscales y monetarias aplicadas en respuesta al shock externo? Y ¬øCu√°les son los desaf√≠os macroecon√≥micos que enfrenta el gobierno de Pedro Pablo Kuczynski?

# El presente art√≠culo utiliza un enfoque cuantitativo que se refleja en el dise√±o de la investigaci√≥n, la metodolog√≠a, el procesamiento de datos y el alcance del estudio. El enfoque cuantitativo se caracteriza por producir conocimiento objetivo de la realidad, generalmente alcanzado por medio de procedimientos estad√≠sticos inferenciales. En efecto, el estudio est√° basado en los datos estad√≠sticos del Banco Central de Reserva, cuyo an√°lisis permite evaluar las hip√≥tesis de investigaci√≥n. Adem√°s, a partir de estos datos, se brindan recomendaciones para el manejo de la econom√≠a en el gobierno de PPK.
# 
# En cuanto a las fortalezas, precisamente el hecho de que el art√≠culo haya utilizado diferentes datos estad√≠sticos del Banco Central de Reserva permiti√≥ tener una aproximaci√≥n a la realidad objetiva de la econom√≠a peruana en las √∫ltimas d√©cadas, lo cual fue de gran eficacia para corroboraci√≥n de las hip√≥tesis de la investigaci√≥n. Por ejemplo, los datos muestran una correlaci√≥n positiva entre la ca√≠da de los precios de las materias primas y los periodos de recesi√≥n. A partir de ello, fue posible identificar los patrones externos comunes que desencadenan crisis econ√≥micas en el pa√≠s, as√≠ como las medidas que las han intensificado o reducido. Se comprob√≥ que las contracciones del cr√©dito extranjero, la fluctuaci√≥n del d√≥lar o la disminuci√≥n en la inversi√≥n privada tienen un gran efecto en las crisis inflacionarias peruanas. En este sentido, desde un enfoque cualitativo habr√≠a sido mucho m√°s dificultoso llegar a formular estos patrones y/o generalizaciones que esclarecen el funcionamiento de la econom√≠a peruana. 
# 
# Por ello, otra fortaleza de este enfoque es que permite la realizaci√≥n de predicciones. En este caso, los datos predec√≠an la continuaci√≥n de la inflaci√≥n durante el gobierno de PPK, de modo que sirvieron como alerta para que el Ministerio de Econom√≠a y el Banco Central de Reserva tomen las previsiones y las medidas m√°s apropiadas. Esto es muy importante para el prop√≥sito de la investigaci√≥n de describir los desaf√≠os del nuevo gobierno, as√≠ como brindar las recomendaciones m√°s apropiadas en base a datos estad√≠sticos objetivos.Por ejemplo, se demostr√≥ que la estrategia de aumentar la tasa de inter√©s y reducir en el gasto p√∫blico, solo ha logrado acentuar las crisis financieras. Debido al enfoque cuantitativo que permiti√≥ conocer este resultado, el art√≠culo tiene las bases estad√≠sticas para recomendar la reducci√≥n de la tasa de inter√©s y el aumento del gasto p√∫blico en miras a lograr dinamizar la econom√≠a estancada. 
# 
# Por otro lado, este enfoque tambi√©n tiene ciertas debilidades que han limitado la investigaci√≥n. Los enfoques cuantitativos apuntan a la medici√≥n de fen√≥menos para producir generalidades, de modo que no siempre se estudia a profundidad las particularidades de cada contexto. As√≠, el art√≠culo permite explicar los efectos de ciertos fen√≥menos internacionales en las recesiones financieras del pa√≠s, pero sin ahondar en las razones por las que surgieron estos fen√≥menos o sus respectivos contextos. Adem√°s, al requerir de una gran cantidad de datos, se ignoran las excepciones o particularidades de ciertos sectores de la poblaci√≥n afectados por la recesi√≥n. Aun as√≠, esto no elimina la gran utilidad de los resultados para la comprensi√≥n del panorama macroecon√≥mico en el Per√∫.
# 

# En cuanto a la contribuci√≥n del documento, por un lado, incrementa el conocimiento respecto a las crisis econ√≥micas sufridas en el Per√∫ en los √∫ltimos a√±os. As√≠, brinda una gu√≠a para la identificaci√≥n de los errores y √©xitos en las pol√≠ticas macroecon√≥micas, de manera que se puedan tomar mejores decisiones en el gobierno de PPK y en el futuro en general.
# 
# Ciertamente, el articulo constituye una gran contribuci√≥n para la comprensi√≥n de los m√°s recientes periodos de recesi√≥n peruanos. As√≠, a partir de sus resultados, se pueden anticipar las situaciones externas (como la ca√≠da en el valor de las materias primas o la contracci√≥n del cr√©dito en moneda extranjera) que desencadenan un periodo intenso de estancamiento econ√≥mico. Al mismo tiempo, al evaluar el funcionamiento de las pol√≠ticas fiscales y monetarias llevadas a cabo para enfrentar cada crisis, este art√≠culo puede ser utilizado como una referencia para conocer las medidas que mejor y peor funcionan en el enfrentamiento de las crisis en el Per√∫. 
# 
# Precisamente, los autores no solo describen los grandes desaf√≠os econ√≥micos del nuevo gobierno, sino que brindan recomendaciones explicitas para enfrentarlos.  El estudio recomienda la dinamizaci√≥n y diversificaci√≥n de la econom√≠a, as√≠ como la mitigaci√≥n del conflicto entre un tipo de cambio real alto y una inflaci√≥n baja; tales cuestiones, aunque no brindan una gu√≠a espec√≠fica para el manejo macroecon√≥mico en el nuevo gobierno, contribuyen brindando un punto de partida importante para mitigar los problemas econ√≥micos del pa√≠s. 
# 
# En este sentido, la contribuci√≥n del articulo no solo es informar, sino tambi√©n ser de ayuda referencial para las pol√≠ticas macroecon√≥micas que el nuevo gobierno puede tomar. En consecuencia, contribuye en la tarea de no cometer los mismos errores en las pol√≠ticas macroecon√≥micas que en el pasado y en el establecimiento de acciones para que la crisis econ√≥mica no se magnifique. Adem√°s, al ser un art√≠culo abierto al p√∫blico, aunque su principal audiencia puedan ser los economistas, los ciudadanos tambi√©n pueden acceder a √©l y estar informados de la manera en que operan y se enfrentan las crisis en el en el pa√≠s.
# 

# Por supuesto, se pueden realizar avances en la investigaci√≥n. El art√≠culo ha demostrado que los factores externos, como la ca√≠da en los precios de las materias primas y la reducci√≥n de las inversiones, afectan la econom√≠a del pa√≠s. Sin embargo, no ahonda en los factores internos que tambi√©n pueden influir en el desencadenamiento de una crisis econ√≥mica. Precisamente, Rodr√≠guez (2021) se√±ala que los factores dom√©sticos vienen adquiriendo mayor relevancia en la variabilidad del crecimiento econ√≥mico peruano en los √∫ltimos a√±os. Por ello, un primer paso ineludible para avanzar en la pregunta de investigaci√≥n del art√≠culo es considerar los factores internos, incluso a nivel pol√≠tico, social y cultural, que intensifican o reducen las crisis en el pa√≠s. 
# 
# Adicionalmente, otro paso es profundizar el conocimiento en la estructura de la econom√≠a o el modelo de desarrollo del pa√≠s. Seg√∫n Dancourt (2013) este factor tambi√©n influye en los procesos de recesi√≥n y por ende debe ser estudiado a mayor profundidad. Considero que se la evaluaci√≥n del modelo econ√≥mico debe llevar a una mayor comprensi√≥n de la dependencia de la econom√≠a peruana a los factores externos y as√≠ contribuir con la tarea de formular pol√≠ticas macroecon√≥micas que cuiden el pa√≠s cuando ocurran tales fen√≥menos externos. De este modo, se lograr√° avanzar en el entendimiento y las acciones m√°s adecuadas para manejar las crisis en el Per√∫. 
# 

# ## C√≥digo en Python

# #### 1.Derive y explique la funci√≥n de demanda de Consumo. Replique el gr√°fico siguiente:

# In[1]:


import ipywidgets as widgets
import matplotlib.pyplot as plt
import numpy as np
import sympy as sy
from sympy import *
import pandas as pd
from causalgraphicalmodels import CausalGraphicalModel


# ##### 1.1) Derivaci√≥n 
# siendo: 
# $$T=YT$$
# y, $$Yd= Y-T$$ 
# por ende, $$ Yd=(1 - t)Y $$
# Entonces, al reemplazar valores, en la funci√≥n de demanda de consumo resultar√≠a:
# $$ C = C_0 + bYd  $$
# 
# $$ C = Co + b(1-t)Y $$
# ##### 1.2) Explicaci√≥n 
# La funci√≥n de Demanda de Consumo parte de que las familias toman decisiones de gasto y ahorro. Asimismo, la suma de salarios de los trabajadores y de los beneficios de los propietarios del stock de capital es igual al Ingreso Agregado (Y) y como cierta parte de este ingreso (Y) se entrega al Estado como tributaci√≥n (T), con lo que queda se decide consumir y ahorrar.
# 
# Adem√°s, sus valores significan:
# $C_0$ es el nivel b√°sico de consumo, es decir, el consumo aut√≥nomo, y $b$ representa la propensi√≥n marginal a consumir, en otras palabras, representa el cambio en el consumo por unidad de cambio en el ingreso disponible. Esta se encuentra entre cero y uno, 0 < ùëè < 1. 
# 
# ##### 1.3) R√©plica de gr√°fico 

# In[2]:


# Par√°metros

Y_size = 100 

Co = 35
b = 0.8
t = 0.3

Y = np.arange(Y_size)

# Ecuaci√≥n de la curva del ingreso de equilibrio

def C(Co, b, t, Y):
    C = Co + b*(1-t)*Y
    return C

C = C(Co, b, t, Y)


# In[3]:


# Gr√°fico

# Dimensiones del gr√°fico
y_max = np.max(Y)
fig, ax = plt.subplots(figsize=(10, 8))

custom_xlim = (0, 130)
custom_ylim = (20, 130)

plt.setp(ax, xlim=custom_xlim, ylim=custom_ylim)


# Curvas a graficar
ax.plot(Y, C, label = "Consumo", color = "C3") #Demanda agregada

# Eliminar las cantidades de los ejes
ax.yaxis.set_major_locator(plt.NullLocator())   
ax.xaxis.set_major_locator(plt.NullLocator())

# Texto agregado
    # punto de equilibrio
plt.text(80, 95, '$PMgC = ‚ñ≥C/‚ñ≥Y^d = b = 0.5$', fontsize = 13, color = 'black')


# T√≠tulo y leyenda
ax.set(title="Funci√≥n de demanda de Consumo", xlabel= '$Y^d$', ylabel= 'C')
ax.legend() #mostrar leyenda

plt.show()


# #### 2.Derive y explique la funci√≥n de Inversi√≥n. Replique el gr√°fico siguiente:

# ##### 2.1) Explicaci√≥n 
# 
# Los gastos de inversi√≥n aumentan el stock de capital y la producci√≥n de largo plazo de la econom√≠a.
# La funci√≥n de Demanda de Inversi√≥n $$I= I_0-hr$$ los representa. Aqu√≠, $I_0$ es la inversi√≥n aut√≥noma,$h$ es la sensibilidad de un inversionista ante la tasa de inter√©s real y $r$ es la tasa de inter√©s real. 
# 
# Los valores de $r$ y $h$ se encuentran en un rango de 0 a 1.Entonces, hay una variaci√≥n inversa entre la tasa de inter√©s real $r$ y la funci√≥n de demanda de Inversi√≥n $I$ y una variaci√≥n directa entre la 
# inversi√≥n aut√≥noma $I_0$ y las expectativas de los inversionistas.
# 
# ##### 2.2)Gr√°fico

# In[4]:


#Par√°metros
Io = 40
h = 0.7

r = np.arange(start = 0.01, stop = 1, step =0.01)  
r

# Ecuaci√≥n de la curva del ingreso de equilibrio

def I(Io, h, r):
    I = Io - h*r
    return I

I = I(Io, h, r)


# In[5]:


# Gr√°fico

# Dimensiones del gr√°fico
y_max = np.max(r)
fig, ax = plt.subplots(figsize=(10, 8))

custom_xlim = (0.1, 1.25)
custom_ylim = (39.1, 40.2)

plt.setp(ax, xlim=custom_xlim, ylim=custom_ylim)


# Curvas a graficar
ax.plot(r, I, label = "Inversi√≥n", color = "C4") #Demanda agregada

# Eliminar las cantidades de los ejes
ax.yaxis.set_major_locator(plt.NullLocator())   
ax.xaxis.set_major_locator(plt.NullLocator())

# Texto agregado
    # punto de equilibrio
plt.text(0.8, 39.5, '$I = Io - hr$', fontsize = 12.5, color = 'green')


# T√≠tulo y leyenda
ax.set(title="Funci√≥n de demanda de Inversi√≥n", xlabel= 'r', ylabel= 'I')
ax.legend() #mostrar leyenda

plt.show()


# #### 3.¬øCu√°les son los supuestos del modelo Ingreso-Gasto Keynesiano?
# Los supuestos del modelo son 4: 
# 
# I)El nivel de precios est√° fijo. II)El nivel del producto se adapta a
# los cambios en la demanda agregada ($DA$). III) La tasa de inter√©s est√° determinada fuera del
# modelo ingreso-gasto (se da en el mercado monetario $LM$). IV) Este es un modelo de corto plazo. 

# #### 4.A partir de las siguientes ecuaciones

# ##### a) Encuentre el nivel de Ingreso de equilibrio Ye
# La ecuaci√≥n de equilibrio para el Ingreso se deriva de la condici√≥n de equilibrio donde el nivel de producci√≥n es igual a la Demanda Agregada.
# 
# Entonces, definimos la ecuaci√≥n de la Demanda Agregada:
# $$ DA = (C_0 + bYd + I_0 + G_0 + X_0 - hr) - mYd $$
# 
# Luego de reemplazar ecuaciones y realizar algunas operaciones algebraicas se obtiene:
# 
# $$ DA = (C_0 + b(1-t)Y + I_0 + G_0 + X_0 - hr) - m(1-t)Y $$
# 
# $$ DA = (C_0 + I_0 + G_0 + X_0 - hr) + (b - m)(1 - t)Y $$
# 
# De forma corta:
# 
# $$ DA = Œ±_0 + Œ±_1Y $$
# 
# Aqu√≠, $ Œ±o = (C_0 + I_0 + G_0 + X_0 -hr)$ es el intercepto y $ Œ±1 = (b - m)(1 - t) $ es la pendiente de la funci√≥n
# 
# Entonces, como la condici√≥n de equilibrio es $Y = DA$, la ecuaci√≥n del ingreso de equilibrio es:
# 
# $$ Y = (C_0 + I_0 + G_0 + X_0 - hr)+(b - m)*(1 - t)Y $$
# 
# $$ Y =  \frac{1}{1 - (b - m)(1 - t)} (C_0 + I_0 + G_0 + X_0 - hr) $$

# #### b)Replique el siguiente gr√°fico con todas descripciones encima de las rectas.

# In[6]:


# Par√°metros

Y_size = 100 

Co = 35
Io = 40
Go = 70
Xo = 2
h = 0.7
b = 0.8 # b > m
m = 0.2
t = 0.3
r = 0.9

Y = np.arange(Y_size)

# Ecuaci√≥n de la curva del ingreso de equilibrio

def DA_K(Co, Io, Go, Xo, h, r, b, m, t, Y):
    DA_K = (Co + Io + Go + Xo - h*r) + ((b - m)*(1 - t)*Y)
    return DA_K

DA_IS_K = DA_K(Co, Io, Go, Xo, h, r, b, m, t, Y)


# In[7]:


# Recta de 45¬∞

a = 2.5 

def L_45(a, Y):
    L_45 = a*Y
    return L_45

L_45 = L_45(a, Y)


# In[8]:


# Gr√°fico

# Dimensiones del gr√°fico
y_max = np.max(DA_IS_K)
fig, ax = plt.subplots(figsize=(10, 8))

# Curvas a graficar
ax.plot(DA_IS_K, label = "DA", color = "C1") #Demanda agregada
ax.plot(L_45, color = "C2") #L√≠nea de 45¬∫

# Eliminar las cantidades de los ejes
ax.yaxis.set_major_locator(plt.NullLocator())   
ax.xaxis.set_major_locator(plt.NullLocator())

# L√≠neas punteadas punto de equilibrio
plt.axvline(x=70.5,  ymin= 0, ymax= 0.69, linestyle = ":", color = "grey")
plt.axhline(y=176, xmin= 0, xmax= 0.7, linestyle = ":", color = "grey")

plt.axvline(x=70.5,  ymin= 0, ymax= 0.69, linestyle = ":", color = "grey")
plt.axhline(y=145, xmin= 0, xmax= 1, linestyle = ":", color = "grey")

# Texto agregado
    # punto de equilibrio
plt.text(0, 180, '$DA^e$', fontsize = 11.5, color = 'black')
plt.text(72, 0, '$Y^e$', fontsize = 12, color = 'black')
plt.text(0, 152, '$Œ±_o$', fontsize = 15, color = 'black')
    # l√≠nea 45¬∫
plt.text(6, 4, '$45¬∞$', fontsize = 11.5, color = 'black')
plt.text(2.5, -3, '$‚óù$', fontsize = 30, color = '#404040')
    # ecuaciones
plt.text(87, 203, '$DA = Œ±_0 + Œ±_1 Y$', fontsize = 11.5, color = '#3D59AB')
plt.text(80, 165, '$Œ±_1 = (b-m)(1-t)$', fontsize = 11.5, color = 'green')
plt.text(73, 125, '$Œ±_0 = C_o + I_o + G_o + X_o - hr$', fontsize = 11.5, color = 'green')

plt.text(92, 192, '$‚Üì$', fontsize = 13, color = 'black')
plt.text(85, 135, '$‚Üë$', fontsize = 13, color = 'black')

# T√≠tulo y leyenda
ax.set(title="El ingreso de Equilibrio a Corto Plazo", xlabel= r'Y', ylabel= r'DA')
ax.legend() #mostrar leyenda

plt.show()


# ### 5.Est√°tica comparativa en el modelo de Ingreso-Gasto keynesiano
# 
# ##### a) Analice una Pol√≠tica Fiscal Expansiva con aumento del Gasto del Gobierno. El an√°lisis debe ser intuitivo, matem√°tico y gr√°fico.

# - Intuici√≥n: 
# 
# $$ ‚ÜëGo ‚Üí ‚ÜëG ‚Üí ‚ÜëDA ‚Üí DA > Y ‚Üí ‚ÜëY $$

# - Matem√°ticamente: $‚àÜG_0 > 0  ‚Üí  ¬ø‚àÜY?$
# 
# $$ Y = \frac{1}{1 - (b - m)(1 - t)} (C_0 + I_0 + G_0 + X_0 - hr) $$
# 
# 
# o, considerando el multiplicador keynesiano, $ k > 0 $:
# 
# $$ Y = k (C_0 + I_0 + G_0 + X_0 - hr) $$
# 
# 
# $$ ‚àÜY = k (‚àÜC_0 + ‚àÜI_0 + ‚àÜG_0 + ‚àÜX_0 - ‚àÜhr) $$

# Pero, como no han habido cambios en $C_0$, $I_0$, $X_0$, $h$ ni $r$, entonces: 
# 
# $$‚àÜC_0 = ‚àÜI_0 = ‚àÜX_0 = ‚àÜh = ‚àÜr = 0$$
# 
# $$ ‚àÜY = k (‚àÜG_0) $$
# 
# 
# Sabiendo que $‚àÜG_0 > 0 $ y que $k > 0$, la multiplicaci√≥n de un n√∫mero positivo con un n√∫mero positivo dar√° otro n√∫mero positivo:
# 
# $$ ‚àÜY = (+)(+) $$
# 
# $$ ‚àÜY > 0 $$
# 
# - Gr√°fico

# In[9]:


# Curva de ingreso de equilibrio ORIGINAL

# Par√°metros
Y_size = 100 

Co = 35
Io = 40
Go = 70
Xo = 2
h = 0.7
b = 0.8
m = 0.2
t = 0.3
r = 0.9

Y = np.arange(Y_size)

    # Ecuaci√≥n 
def DA_K(Co, Io, Go, Xo, h, r, b, m, t, Y):
    DA_K = (Co + Io + Go + Xo - h*r) + ((b - m)*(1 - t)*Y)
    return DA_K

DA_IS_K = DA_K(Co, Io, Go, Xo, h, r, b, m, t, Y)

#--------------------------------------------------
# NUEVA curva de ingreso de equilibrio

# Se define el par√°metro cambiado
Go = 90

# Generar la ecuaci√≥n con el nuevo par√°metro
def DA_K(Co, Io, Go, Xo, h, r, b, m, t, Y):
    DA_K = (Co + Io + Go + Xo - h*r) + ((b - m)*(1 - t)*Y)
    return DA_K

DA_G = DA_K(Co, Io, Go, Xo, h, r, b, m, t, Y)


# In[10]:


# Gr√°fico
#Dimensiones del grafico
y_max = np.max(DA_IS_K)
fig, ax = plt.subplots(figsize=(10, 8))


# Curvas a graficar
ax.plot(Y, DA_IS_K, label = "DA", color = "#3D59AB") #curva ORIGINAL
ax.plot(Y, DA_G, label = "DA_G", color = "#9acd32", linestyle = 'dashed') #NUEVA curva
ax.plot(Y, L_45, color = "#404040") #l√≠nea de 45¬∫

# Lineas punteadas
plt.axvline(x = 70.5, ymin= 0, ymax = 0.69, linestyle = ":", color = "grey")
plt.axhline(y = 176, xmin= 0, xmax = 0.68, linestyle = ":", color = "grey")
plt.axvline(x = 80,  ymin= 0, ymax = 0.78, linestyle = ":", color = "grey")
plt.axhline(y = 200.5, xmin= 0, xmax = 0.78, linestyle = ":", color = "grey")

# Texto agregado
plt.text(0, 136, '$DA^e$', fontsize = 11.5, color = 'black')
plt.text(0, 178, '$DA_G$', fontsize = 11.5, color = '#9bcc37')
plt.text(6, 4, '$45¬∞$', fontsize = 11.5, color = 'black')
plt.text(2.5, -3, '$‚óù$', fontsize = 30, color = '#9acd32')
plt.text(66, 0, '$Y^e$', fontsize = 12, color = 'black')
plt.text(85, 0, '$Y_G$', fontsize = 12, color = '#9acd32')
plt.text(73, 45, '$‚Üí$', fontsize = 18, color = 'black')
plt.text(20, 160, '$‚Üë$', fontsize = 18, color = 'black')

# T√≠tulo y leyenda
ax.set(title = "Efectos de aumentar el Gasto de gobierno", xlabel = r'Y', ylabel = r'DA')
ax.legend()

plt.show()


# ##### b) Analice una Pol√≠tica fiscal expansiva con una reducci√≥n de la Tasa de Tributaci√≥n ($Œît < 0$). El an√°lisis debe ser intuitivo, matem√°tico y gr√°fico.
# - An√°lisis intuitivo: ¬øContradicci√≥n?
# $$ t‚Üì ‚Üí Co‚Üë ‚Üí DA‚Üë ‚Üí DA > Y ‚Üí Y‚Üë $$
# $$ t‚Üì ‚Üí M‚Üë ‚Üí DA‚Üì ‚Üí DA < Y ‚Üí Y‚Üì $$

# - An√°lisis matem√°tico: $‚àÜt < 0  ‚Üí  ¬ø‚àÜY?$

# In[11]:


Co, Io, Go, Xo, h, r, b, m, t = symbols('Co Io Go Xo h r b m t')

f = (Co + Io + Go + Xo - h*r)/(1-(b-m)*(1-t))

df_t = diff(f, t)
df_t #‚àÜY/‚àÜt


# Considernado el diferencial de $‚àÜt$:
# 
# $$ \frac{‚àÜY}{‚àÜt} = \frac{(m-b)(Co + Go + Io + Xo - hr)}{(1-(1-t)(b-m)+1)^2} $$
# y:
# - Sabiendo que b > m, entonces $(m-b) < 0$
# - Los componentes aut√≥nomos no cambian: $‚àÜC_0 = ‚àÜI_0 = ‚àÜX_0 = ‚àÜh = ‚àÜr = 0$
# - Cualquier n√∫mero elevado al cuadrado ser√° positivo: $ (1-(1-t)(b-m)+1)^2 > 0 $
# 
# Entonces:
# 
# $$ \frac{‚àÜY}{‚àÜt} = \frac{(-)}{(+)} $$
# 
# Dado que $‚àÜt < 0$, la divisi√≥n de un n√∫mero positivo y otro nu√∫mero positivo da otro positivo:
# 
# $$ \frac{‚àÜY}{(-)} = \frac{(-)}{(+)} $$
# 
# $$ ‚àÜY = \frac{(-)(-)}{(+)} $$
# 
# $$ ‚àÜY > 0 $$

# - An√°lisis gr√°fico:

# In[12]:


# Curva de ingreso de equilibrio ORIGINAL

# Par√°metros
t_size = 100 

Co = 35
Io = 40
Go = 70
Xo = 2
h = 0.7
b = 0.8
m = 0.2
t = 0.3 #tasa de tributaci√≥n
r = 0.9

Y = np.arange(t_size)

# Ecuaci√≥n 
def DA_K(Co, Io, Go, Xo, h, r, b, m, t, Y):
    DA_K = (Co + Io + Go + Xo - h*r) + ((b - m)*(1 - t)*Y)
    return DA_K

DA_IS_K = DA_K(Co, Io, Go, Xo, h, r, b, m, t, Y)

#--------------------------------------------------
# NUEVA curva de ingreso de equilibrio

# Definimos el par√°metro cambiado
t = 0.01

# Generar la ecuaci√≥n con el nuevo par√°metros
def DA_K(Co, Io, Go, Xo, h, r, b, m, t, Y):
    DA_K = (Co + Io + Go + Xo - h*r) + ((b - m)*(1 - t)*Y)
    return DA_K

DA_T = DA_K(Co, Io, Go, Xo, h, r, b, m, t, Y)


# In[13]:


# Gr√°fico
y_max = np.max(DA_IS_K)
fig, ax = plt.subplots(figsize=(10, 8))

# Curvas a graficar
ax.plot(Y, DA_IS_K, label = "DA", color = "#3c9eff") #curva ORIGINAL
ax.plot(Y, DA_T, label = "DA_T", color = "#9acd32", linestyle = 'dashed') #NUEVA curva
ax.plot(Y, L_45, color = "#404040") #l√≠nea de 45¬∫

# Lineas punteadas
plt.axvline(x = 70.5, ymin= 0, ymax = 0.69, linestyle = ":", color = "grey")
plt.axhline(y = 176, xmin= 0, xmax = 0.7, linestyle = ":", color = "grey")
plt.axvline(x = 77,  ymin= 0, ymax = 0.75, linestyle = ":", color = "grey")
plt.axhline(y = 192, xmin= 0, xmax = 0.75, linestyle = ":", color = "grey")

# Texto agregado
plt.text(0, 160, '$DA^e$', fontsize = 11.5, color = 'black')
plt.text(0, 200, '$DA_t$', fontsize = 11.5, color = '#9acd32')
plt.text(6, 4, '$45¬∞$', fontsize = 11.5, color = 'black')
plt.text(2.5, -3, '$‚óù$', fontsize = 30, color = '#404040')
plt.text(68, 0, '$Y^e$', fontsize = 12, color = 'black')
plt.text(80, 0, '$Y_t$', fontsize = 12, color = '#9acd32')
plt.text(72, 45, '$‚Üí$', fontsize = 18, color = 'black')
plt.text(20, 180, '$‚Üë$', fontsize = 18, color = 'black')

# T√≠tulo y leyenda
ax.set(title = "Efectos de reducci√≥n de la Tasa de Tributaci√≥n", xlabel = r'Y', ylabel = r'DA')
ax.legend()

plt.show()


# ### 6.Est√°tica comparativa en el modelo de Ingreso-Gasto keynesiano con Regla Contrac√≠clica.
# Utilizaremos un modelo con regla contrac√≠clica. Este tipo de pol√≠tica fiscal hace que los auges y las depresiones no sean muy pronunciados. Se establece como una regla consistente en una variaci√≥n del Gasto ($G$) (La magnitud es exactamente igual que en 5) en sentido contrario a la variaci√≥n del Producto, Y. Uilice las siguientes ecuaciones y responda.

# ##### 6.1) Grafique la Funcion de demanda Agregada y la recta de 45 grados se√±alando los valores de intercepto y pendiente como en el apartado (4).

# In[14]:


# Par√°metros

Y_size = 100 

Co = 35
Io = 40
Go = 70
g = 0.2 #solo valores entre 0-0.4
Xo = 2
h = 0.7
b = 0.8 # b > m
m = 0.2
t = 0.3
r = 0.9

Y = np.arange(Y_size)

# Ecuaci√≥n de la curva del ingreso de equilibrio

def DA_C(Co, Io, Go, Xo, h, r, b, m, t, g, Y):
    DA_C = (Co  + Io + Go + Xo - h*r) + [(b-m)*(1-t)-g]*Y
    return DA_C

DA_Cont = DA_C(Co, Io, Go, Xo, h, r, b, m, t, g, Y)


# In[15]:


# Gr√°fico

# Dimensiones del gr√°fico
y_max = np.max(DA_Cont)
fig, ax = plt.subplots(figsize=(10, 8))

# Curvas a graficar
ax.plot(DA_Cont, label = "DA", color = "C3") #Demanda agregada
ax.plot(L_45, color = "#404040") #L√≠nea de 45¬∫

# Eliminar las cantidades de los ejes
ax.yaxis.set_major_locator(plt.NullLocator())   
ax.xaxis.set_major_locator(plt.NullLocator())

# L√≠neas punteadas punto de equilibrio
plt.axvline(x=64,  ymin= 0, ymax= 0.63, linestyle = ":", color = "grey")
plt.axhline(y=161, xmin= 0, xmax= 0.63, linestyle = ":", color = "grey")
plt.axhline(y=145, xmin= 0, xmax= 1, linestyle = ":", color = "grey")

# Texto agregado
    # punto de equilibrio
plt.text(0, 165, '$DA^e$', fontsize = 11.5, color = 'black')
plt.text(65, 0, '$Y^e$', fontsize = 12, color = 'black')
plt.text(0, 135, '$Œ±_o$', fontsize = 15, color = 'black')
    # l√≠nea 45¬∫
plt.text(6, 4, '$45¬∞$', fontsize = 11.5, color = 'black')
plt.text(2.5, -3, '$‚óù$', fontsize = 30, color = '#404040')
    # ecuaciones
plt.text(82, 185, '$DA = Œ±_0 + Œ±_1 Y$', fontsize = 11.5, color = 'C3')
plt.text(75, 151, '$Œ±_1 = [(b-m)(1-t)-g]$', fontsize = 11.5, color = 'black')
plt.text(73, 125, '$Œ±_0 = C_o + I_o + G_o + X_o - hr$', fontsize = 11.5, color = 'black')

plt.text(87, 175, '$‚Üì$', fontsize = 13, color = 'black')
plt.text(85, 135, '$‚Üë$', fontsize = 13, color = 'black')

# T√≠tulo y leyenda
ax.set(title="El ingreso de Equilibrio a Corto Plazo con regla contrac√≠clica", xlabel= r'Y', ylabel= r'DA')
ax.legend() #mostrar leyenda

plt.show()


# #### 6.2) Encuentre el nivel de Ingreso de equilibrio Ye 
# La ecuaci√≥n de la Demanda Agregada es: 
# 
# $$ DA = (C_0 + I_0 + G_0 + X_0 - hr) + ((b - m)(1 - t)-g)Y $$
# 
# De forma corta:
# 
# $$ DA = Œ±_0 + Œ±_1Y $$
# 
# Donde $ Œ±_0 = (C_0 + I_0 + G_0 + X_0 -hr)$ es el intercepto y $ Œ±_1 = ((b - m)(1 - t)-g) $ es la pendiente de la funci√≥n
# 
# Considerando la condici√≥n de equilibrio $Y = DA$, la ecuaci√≥n del ingreso de equilibrio es:
# 
# $$ Y^e = (C_0 + I_0 + G_0 + X_0 - hr)+((b - m)*(1 - t)-g)Y $$
# 
# $$ Y^e=  \frac{1}{1 - (b - m)(1 - t)+ g} (C_0 + I_0 + G_0 + X_0 - hr) $$

# #### 6.3) Analice una Pol√≠tica Fiscal Expansiva con aumento del Gasto del Gobierno. El an√°lisis debe ser intuitivo, matem√°tico y gr√°fico.

# - Intuici√≥n: 
# 
# $$ ‚ÜëGo ‚Üí ‚Üë(G_0-gY) ‚Üí ‚ÜëG ‚Üí ‚ÜëDA ‚Üí DA > Y ‚Üí ‚ÜëY $$

# - Matem√°ticamente: $‚àÜG_0 > 0  ‚Üí  ¬ø‚àÜY?$
# 
# $$ Y = \frac{1}{1 - (b - m)(1 - t) + g} (C_0 + I_0 + G_0 + X_0 - hr) $$
# 
# y, considerando el multiplicador keynesiano, $ k > 0 $:
# 
# $$ Y = k(C_0 + I_0 + G_0 + X_0 - hr) $$

# $$ ‚àÜY = k(‚àÜC_0 + ‚àÜI_0 + ‚àÜG_0 + ‚àÜX_0 - ‚àÜh‚àÜr) $$
# 
# Pero, como no han habido cambios en $C_0$, $I_0$, $X_0$, $h$ ni $r$, entonces: 
# 
# $$‚àÜC_0 = ‚àÜI_0 = ‚àÜX_0 = ‚àÜh = ‚àÜr = 0$$
# 
# $$ ‚àÜY = k(‚àÜG_0) $$
# 
# Sabiendo que $‚àÜG_0 > 0 $ y que $k > 0$, entonces la multiplicaci√≥n de un n√∫mero positivo y otro n√∫mero positivo dar√° como resultado otro n√∫mero positivo:
# 
# $$ \frac{‚àÜY}{(+)} = (+) $$
# 
# $$ ‚àÜY = (+)(+) $$
# $$ ‚àÜY > 0 $$

# - Gr√°fico 

# In[16]:


# Curva de ingreso de equilibrio ORIGINAL

# Par√°metros
Y_size = 100 

Co = 35
Io = 40
Go = 70
Xo = 2
h = 0.7
b = 0.8
m = 0.2
t = 0.3
r = 0.9
g = 0.3

Y = np.arange(Y_size)

    # Ecuaci√≥n 
def DA_K(Co, Io, Go, Xo, h, r, b, m, t, g, Y):
    DA_K = (Co + Io + Go + Xo - h*r) + ((b - m)*(1 - t)-g)*Y
    return DA_K

DA_IS_G = DA_K(Co, Io, Go, Xo, h, r, b, m, t, g, Y)


#--------------------------------------------------
# NUEVA curva de ingreso de equilibrio

    # Definir SOLO el par√°metro cambiado
Go = 90

# Generar la ecuaci√≥n con el nuevo par√°metro
def DA_K(Co, Io, Go, Xo, h, r, b, m, t, g, Y):
    DA_K = (Co + Io + Go + Xo - h*r) + ((b - m)*(1 - t)-g)*Y
    return DA_K

DA_GG = DA_K(Co, Io, Go, Xo, h, r, b, m, t, g, Y)


# In[17]:


# Gr√°fico
#Dimensiones del grafico
y_max = np.max(DA_IS_G)
fig, ax = plt.subplots(figsize=(10, 8))

# Curvas a graficar
ax.plot(Y, DA_IS_G, label = "DA", color = "#3D59AB") #curva ORIGINAL
ax.plot(Y, DA_GG, label = "DA_G", color = "#9acd32", linestyle = 'dashed') #NUEVA curva
ax.plot(Y, L_45, color = "#404040") #l√≠nea de 45¬∫

# Lineas punteadas
plt.axvline(x = 61.5, ymin= 0, ymax = 0.61, linestyle = ":", color = "grey")
plt.axhline(y = 155, xmin= 0, xmax = 0.61, linestyle = ":", color = "grey")
plt.axvline(x = 70.5,  ymin= 0, ymax = 0.70, linestyle = ":", color = "grey")
plt.axhline(y = 176, xmin= 0, xmax = 0.78, linestyle = ":", color = "grey")

# Texto agregado
plt.text(0, 150, '$DA^e$', fontsize = 11.5, color = 'black')
plt.text(0, 180, '$DA_G$', fontsize = 11.5, color = '#9acd32')
plt.text(6, 4, '$45¬∞$', fontsize = 11.5, color = 'black')
plt.text(2.5, -3, '$‚óù$', fontsize = 30, color = '#404040')
plt.text(52, 0, '$Y^e$', fontsize = 12, color = 'black')
plt.text(72, 0, '$Y_G$', fontsize = 12, color = '#9acd32')
plt.text(66, 45, '$‚Üí$', fontsize = 18, color = 'black')
plt.text(20, 155, '$‚Üë$', fontsize = 18, color = 'black')

# T√≠tulo y leyenda
ax.set(title = "Efectos del aumento del Gasto de Gobierno", xlabel = r'Y', ylabel = r'DA')
ax.legend()

plt.show()


# #### 6.4) ¬øCu√°l es el papel que juega el parametro $g$ en el multiplicador keynesiano?
# El par√°metro g de la regla contrac√≠clica aumenta la magnitud del denominador del multiplicador keynesiano, por ende, reduce el tama√±o del multiplicador keynesiano y al reducir el tama√±o, la pendiente de la Demanda agregada tambi√©n se reduce.
# 
# Pues:
# $$ Y = \frac{1}{1 - (b - m)(1 - t) + g} (C_0 + I_0 + G_0 + X_0 - hr) $$
# 
# y:
# 
# $$ k= \frac{1}{1 - (b - m)(1 - t) + g} $$

# #### 6.5) ¬øEl tama√±o del efecto de la politica fiscal encontrado en 6 es el mismo que en el apartado 5?
# Aunque en ambos casos (apartado 5 y 6) el gasto aumenta en la misma magnitud (20), no podemos decir que el efecto es el mismo, pues, teoricamente sabemos que en una pol√≠tica fiscal contrac√≠clica la pendiente de la curva DA se reduce. Esto se confirma mediante los gr√°ficos, ya que en el apartado 5 la pendiente de la curva DA es m√°s inclinada que en el apartado 6.
# 
# Esto se debe a que el valor del multiplicador keynesiano se redujo por la adici√≥n de g en el denominador. Por tanto, si es m√°s peque√±o, el impacto de una pol√≠tica fiscal expansiva  ser√° menor cuando se utilice la regla contrac√≠clica (la adici√≥n de g). De all√≠ que la pendiente de la curva de la Demanda Agregada sea menor en el apartado 6).

# #### 6.6) Analice una crisis mundial que reduce nuestras exportaciones ($‚àÜX_0 < 0$). El an√°lisis debe ser intuitivo, matem√°tico y gr√°fico.

# - An√°lisis Intuitivo: 
# 
# $$ ‚ÜìXo ‚Üí ‚ÜìX ‚Üí ‚ÜìDA ‚Üí DA < Y ‚Üí ‚ÜìY $$

# - Matem√°ticamente: $‚àÜX_0 < 0  ‚Üí  ¬ø‚àÜY?$
# 
# $$ Y = \frac{1}{1 - (b - m)(1 - t) + g} (C_0 + I_0 + G_0 + X_0 - hr) $$
# 
# y, considerando el multiplicador keynesiano, $ k > 0 $:
# 
# $$ Y = k(C_0 + I_0 + G_0 + X_0 - hr) $$

# $$ ‚àÜY = k(‚àÜC_0 + ‚àÜI_0 + ‚àÜG_0 + ‚àÜX_0 - ‚àÜh‚àÜr) $$
# 
# Pero, como no cambiaron $C_0$, $I_0$, $G_0$, $h$ ni $r$, entonces: 
# 
# $$‚àÜC_0 = ‚àÜI_0 = ‚àÜG_0 = ‚àÜh = ‚àÜr = 0$$
# 
# $$ ‚àÜY = k(‚àÜX_0) $$
# 
# Sabiendo que $‚àÜX_0 < 0 $ y que $k > 0$ , la multiplicaci√≥n de un n√∫mero positivo con un n√∫mero negativo dar√° otro negativo:
# 
# $$ \frac{‚àÜY}{(-)} = (+) $$
# 
# $$ ‚àÜY = (-)(+) $$
# $$ ‚àÜY < 0 $$

# 
# - Gr√°fico

# In[18]:


# Curva de ingreso de equilibrio ORIGINAL

# Par√°metros
Y_size = 100 

Co = 35
Io = 40
Go = 70
Xo = 20
h = 0.7
b = 0.8
m = 0.2
t = 0.3
r = 0.9
g = 0.3
Y = np.arange(Y_size)

    # Ecuaci√≥n 
def DA_K(Co, Io, Go, Xo, h, r, b, m, t, g, Y):
    DA_K = (Co + Io + Go + Xo - h*r) + (((b - m)*(1 - t)-g)*Y)
    return DA_K

DA_IS_G = DA_K(Co, Io, Go, Xo, h, r, b, m, t, g, Y)


#--------------------------------------------------
# NUEVA curva de ingreso de equilibrio

# Definimos el par√°metro cambiado Xo
Xo = 4

# Generar la ecuaci√≥n con el nuevo par√°metro
def DA_K(Co, Io, Go, Xo, h, r, b, m, t, g, Y):
    DA_K = (Co + Io + Go + Xo - h*r) + ((b - m)*(1 - t)-g)*Y
    return DA_K

DA_x = DA_K(Co, Io, Go, Xo, h, r, b, m, t, g, Y)


# In[19]:


# Gr√°fico
y_max = np.max(DA_IS_G)
fig, ax = plt.subplots(figsize=(10, 8))


# Curvas a graficar
ax.plot(Y, DA_IS_G, label = "DA", color = "C1") #curva ORIGINAL
ax.plot(Y, DA_x, label = "DA_X", color = "C3", linestyle = 'dashed') #NUEVA curva
ax.plot(Y, L_45, color = "#404040") #l√≠nea de 45¬∫

# Lineas punteadas
plt.axvline(x = 69.2, ymin= 0, ymax = 0.68, linestyle = ":", color = "grey")
plt.axhline(y = 173.2, xmin= 0, xmax = 0.68, linestyle = ":", color = "grey")
plt.axvline(x = 63,  ymin= 0, ymax = 0.62, linestyle = ":", color = "grey")
plt.axhline(y = 157, xmin= 0, xmax = 0.62, linestyle = ":", color = "grey")

# Texto agregado
plt.text(0, 180, '$DA^e$', fontsize = 11.5, color = 'black')
plt.text(0, 125, '$DA_X$', fontsize = 11.5, color = 'C1')
plt.text(6, 4, '$45¬∞$', fontsize = 11.5, color = 'black')
plt.text(2.5, -3, '$‚óù$', fontsize = 30, color = '#404040')
plt.text(72, 0, '$Y^e$', fontsize = 12, color = 'blue')
plt.text(56, 0, '$Y_X$', fontsize = 12, color = 'C1')
plt.text(64, 100, '$‚Üê$', fontsize = 18, color = 'black')
plt.text(20, 157, '$‚Üì$', fontsize = 18, color = 'black')

# T√≠tulo y leyenda
ax.set(title = "Efectos de reducci√≥n de las exportaciones $(X_0)$", xlabel = r'Y', ylabel = r'DA')
ax.legend()

plt.show()

