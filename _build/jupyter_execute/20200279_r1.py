#!/usr/bin/env python
# coding: utf-8

# # REPORTE 1

# Nombre: Greysi Milagros Arrelucea Castañeda

# ## Lectura

# A partir de los objetivos del presente artículo, es posible identificar la siguiente pregunta de investigación principal: ¿Cuáles fueron los efectos recesivos e inflacionarios del shock externo negativo en la economía peruana durante el 2014-15? Asimismo, el artículo también formula preguntas de investigación secundarias que contribuyen en la respuesta de la pregunta principal: ¿Cuáles fueron las políticas fiscales y monetarias aplicadas en respuesta al shock externo? Y ¿Cuáles son los desafíos macroeconómicos que enfrenta el gobierno de Pedro Pablo Kuczynski?

# El presente artículo utiliza un enfoque cuantitativo que se refleja en el diseño de la investigación, la metodología, el procesamiento de datos y el alcance del estudio. El enfoque cuantitativo se caracteriza por producir conocimiento objetivo de la realidad, generalmente alcanzado por medio de procedimientos estadísticos inferenciales. En efecto, el estudio está basado en los datos estadísticos del Banco Central de Reserva, cuyo análisis permite evaluar las hipótesis de investigación. Además, a partir de estos datos, se brindan recomendaciones para el manejo de la economía en el gobierno de PPK.
# 
# En cuanto a las fortalezas, precisamente el hecho de que el artículo haya utilizado diferentes datos estadísticos del Banco Central de Reserva permitió tener una aproximación a la realidad objetiva de la economía peruana en las últimas décadas, lo cual fue de gran eficacia para corroboración de las hipótesis de la investigación. Por ejemplo, los datos muestran una correlación positiva entre la caída de los precios de las materias primas y los periodos de recesión. A partir de ello, fue posible identificar los patrones externos comunes que desencadenan crisis económicas en el país, así como las medidas que las han intensificado o reducido. Se comprobó que las contracciones del crédito extranjero, la fluctuación del dólar o la disminución en la inversión privada tienen un gran efecto en las crisis inflacionarias peruanas. En este sentido, desde un enfoque cualitativo habría sido mucho más dificultoso llegar a formular estos patrones y/o generalizaciones que esclarecen el funcionamiento de la economía peruana. 
# 
# Por ello, otra fortaleza de este enfoque es que permite la realización de predicciones. En este caso, los datos predecían la continuación de la inflación durante el gobierno de PPK, de modo que sirvieron como alerta para que el Ministerio de Economía y el Banco Central de Reserva tomen las previsiones y las medidas más apropiadas. Esto es muy importante para el propósito de la investigación de describir los desafíos del nuevo gobierno, así como brindar las recomendaciones más apropiadas en base a datos estadísticos objetivos.Por ejemplo, se demostró que la estrategia de aumentar la tasa de interés y reducir en el gasto público, solo ha logrado acentuar las crisis financieras. Debido al enfoque cuantitativo que permitió conocer este resultado, el artículo tiene las bases estadísticas para recomendar la reducción de la tasa de interés y el aumento del gasto público en miras a lograr dinamizar la economía estancada. 
# 
# Por otro lado, este enfoque también tiene ciertas debilidades que han limitado la investigación. Los enfoques cuantitativos apuntan a la medición de fenómenos para producir generalidades, de modo que no siempre se estudia a profundidad las particularidades de cada contexto. Así, el artículo permite explicar los efectos de ciertos fenómenos internacionales en las recesiones financieras del país, pero sin ahondar en las razones por las que surgieron estos fenómenos o sus respectivos contextos. Además, al requerir de una gran cantidad de datos, se ignoran las excepciones o particularidades de ciertos sectores de la población afectados por la recesión. Aun así, esto no elimina la gran utilidad de los resultados para la comprensión del panorama macroeconómico en el Perú.
# 

# En cuanto a la contribución del documento, por un lado, incrementa el conocimiento respecto a las crisis económicas sufridas en el Perú en los últimos años. Así, brinda una guía para la identificación de los errores y éxitos en las políticas macroeconómicas, de manera que se puedan tomar mejores decisiones en el gobierno de PPK y en el futuro en general.
# 
# Ciertamente, el articulo constituye una gran contribución para la comprensión de los más recientes periodos de recesión peruanos. Así, a partir de sus resultados, se pueden anticipar las situaciones externas (como la caída en el valor de las materias primas o la contracción del crédito en moneda extranjera) que desencadenan un periodo intenso de estancamiento económico. Al mismo tiempo, al evaluar el funcionamiento de las políticas fiscales y monetarias llevadas a cabo para enfrentar cada crisis, este artículo puede ser utilizado como una referencia para conocer las medidas que mejor y peor funcionan en el enfrentamiento de las crisis en el Perú. 
# 
# Precisamente, los autores no solo describen los grandes desafíos económicos del nuevo gobierno, sino que brindan recomendaciones explicitas para enfrentarlos.  El estudio recomienda la dinamización y diversificación de la economía, así como la mitigación del conflicto entre un tipo de cambio real alto y una inflación baja; tales cuestiones, aunque no brindan una guía específica para el manejo macroeconómico en el nuevo gobierno, contribuyen brindando un punto de partida importante para mitigar los problemas económicos del país. 
# 
# En este sentido, la contribución del articulo no solo es informar, sino también ser de ayuda referencial para las políticas macroeconómicas que el nuevo gobierno puede tomar. En consecuencia, contribuye en la tarea de no cometer los mismos errores en las políticas macroeconómicas que en el pasado y en el establecimiento de acciones para que la crisis económica no se magnifique. Además, al ser un artículo abierto al público, aunque su principal audiencia puedan ser los economistas, los ciudadanos también pueden acceder a él y estar informados de la manera en que operan y se enfrentan las crisis en el en el país.
# 

# Por supuesto, se pueden realizar avances en la investigación. El artículo ha demostrado que los factores externos, como la caída en los precios de las materias primas y la reducción de las inversiones, afectan la economía del país. Sin embargo, no ahonda en los factores internos que también pueden influir en el desencadenamiento de una crisis económica. Precisamente, Rodríguez (2021) señala que los factores domésticos vienen adquiriendo mayor relevancia en la variabilidad del crecimiento económico peruano en los últimos años. Por ello, un primer paso ineludible para avanzar en la pregunta de investigación del artículo es considerar los factores internos, incluso a nivel político, social y cultural, que intensifican o reducen las crisis en el país. 
# 
# Adicionalmente, otro paso es profundizar el conocimiento en la estructura de la economía o el modelo de desarrollo del país. Según Dancourt (2013) este factor también influye en los procesos de recesión y por ende debe ser estudiado a mayor profundidad. Considero que se la evaluación del modelo económico debe llevar a una mayor comprensión de la dependencia de la economía peruana a los factores externos y así contribuir con la tarea de formular políticas macroeconómicas que cuiden el país cuando ocurran tales fenómenos externos. De este modo, se logrará avanzar en el entendimiento y las acciones más adecuadas para manejar las crisis en el Perú. 
# 

# ## Código en Python

# #### 1.Derive y explique la función de demanda de Consumo. Replique el gráfico siguiente:

# In[1]:


import ipywidgets as widgets
import matplotlib.pyplot as plt
import numpy as np
import sympy as sy
from sympy import *
import pandas as pd
from causalgraphicalmodels import CausalGraphicalModel


# ##### 1.1) Derivación 
# siendo: 
# $$T=YT$$
# y, $$Yd= Y-T$$ 
# por ende, $$ Yd=(1 - t)Y $$
# Entonces, al reemplazar valores, en la función de demanda de consumo resultaría:
# $$ C = C_0 + bYd  $$
# 
# $$ C = Co + b(1-t)Y $$
# ##### 1.2) Explicación 
# La función de Demanda de Consumo parte de que las familias toman decisiones de gasto y ahorro. Asimismo, la suma de salarios de los trabajadores y de los beneficios de los propietarios del stock de capital es igual al Ingreso Agregado (Y) y como cierta parte de este ingreso (Y) se entrega al Estado como tributación (T), con lo que queda se decide consumir y ahorrar.
# 
# Además, sus valores significan:
# $C_0$ es el nivel básico de consumo, es decir, el consumo autónomo, y $b$ representa la propensión marginal a consumir, en otras palabras, representa el cambio en el consumo por unidad de cambio en el ingreso disponible. Esta se encuentra entre cero y uno, 0 < 𝑏 < 1. 
# 
# ##### 1.3) Réplica de gráfico 

# In[2]:


# Parámetros

Y_size = 100 

Co = 35
b = 0.8
t = 0.3

Y = np.arange(Y_size)

# Ecuación de la curva del ingreso de equilibrio

def C(Co, b, t, Y):
    C = Co + b*(1-t)*Y
    return C

C = C(Co, b, t, Y)


# In[3]:


# Gráfico

# Dimensiones del gráfico
y_max = np.max(Y)
fig, ax = plt.subplots(figsize=(10, 8))

custom_xlim = (0, 130)
custom_ylim = (20, 130)

plt.setp(ax, xlim=custom_xlim, ylim=custom_ylim)


# Curvas a graficar
ax.plot(Y, C, label = "Consumo", color = "C3") #Demanda agregada

# Eliminar las cantidades de los ejes
ax.yaxis.set_major_locator(plt.NullLocator())   
ax.xaxis.set_major_locator(plt.NullLocator())

# Texto agregado
    # punto de equilibrio
plt.text(80, 95, '$PMgC = △C/△Y^d = b = 0.5$', fontsize = 13, color = 'black')


# Título y leyenda
ax.set(title="Función de demanda de Consumo", xlabel= '$Y^d$', ylabel= 'C')
ax.legend() #mostrar leyenda

plt.show()


# #### 2.Derive y explique la función de Inversión. Replique el gráfico siguiente:

# ##### 2.1) Explicación 
# 
# Los gastos de inversión aumentan el stock de capital y la producción de largo plazo de la economía.
# La función de Demanda de Inversión $$I= I_0-hr$$ los representa. Aquí, $I_0$ es la inversión autónoma,$h$ es la sensibilidad de un inversionista ante la tasa de interés real y $r$ es la tasa de interés real. 
# 
# Los valores de $r$ y $h$ se encuentran en un rango de 0 a 1.Entonces, hay una variación inversa entre la tasa de interés real $r$ y la función de demanda de Inversión $I$ y una variación directa entre la 
# inversión autónoma $I_0$ y las expectativas de los inversionistas.
# 
# ##### 2.2)Gráfico

# In[4]:


#Parámetros
Io = 40
h = 0.7

r = np.arange(start = 0.01, stop = 1, step =0.01)  
r

# Ecuación de la curva del ingreso de equilibrio

def I(Io, h, r):
    I = Io - h*r
    return I

I = I(Io, h, r)


# In[5]:


# Gráfico

# Dimensiones del gráfico
y_max = np.max(r)
fig, ax = plt.subplots(figsize=(10, 8))

custom_xlim = (0.1, 1.25)
custom_ylim = (39.1, 40.2)

plt.setp(ax, xlim=custom_xlim, ylim=custom_ylim)


# Curvas a graficar
ax.plot(r, I, label = "Inversión", color = "C4") #Demanda agregada

# Eliminar las cantidades de los ejes
ax.yaxis.set_major_locator(plt.NullLocator())   
ax.xaxis.set_major_locator(plt.NullLocator())

# Texto agregado
    # punto de equilibrio
plt.text(0.8, 39.5, '$I = Io - hr$', fontsize = 12.5, color = 'green')


# Título y leyenda
ax.set(title="Función de demanda de Inversión", xlabel= 'r', ylabel= 'I')
ax.legend() #mostrar leyenda

plt.show()


# #### 3.¿Cuáles son los supuestos del modelo Ingreso-Gasto Keynesiano?
# Los supuestos del modelo son 4: 
# 
# I)El nivel de precios está fijo. II)El nivel del producto se adapta a
# los cambios en la demanda agregada ($DA$). III) La tasa de interés está determinada fuera del
# modelo ingreso-gasto (se da en el mercado monetario $LM$). IV) Este es un modelo de corto plazo. 

# #### 4.A partir de las siguientes ecuaciones

# ##### a) Encuentre el nivel de Ingreso de equilibrio Ye
# La ecuación de equilibrio para el Ingreso se deriva de la condición de equilibrio donde el nivel de producción es igual a la Demanda Agregada.
# 
# Entonces, definimos la ecuación de la Demanda Agregada:
# $$ DA = (C_0 + bYd + I_0 + G_0 + X_0 - hr) - mYd $$
# 
# Luego de reemplazar ecuaciones y realizar algunas operaciones algebraicas se obtiene:
# 
# $$ DA = (C_0 + b(1-t)Y + I_0 + G_0 + X_0 - hr) - m(1-t)Y $$
# 
# $$ DA = (C_0 + I_0 + G_0 + X_0 - hr) + (b - m)(1 - t)Y $$
# 
# De forma corta:
# 
# $$ DA = α_0 + α_1Y $$
# 
# Aquí, $ αo = (C_0 + I_0 + G_0 + X_0 -hr)$ es el intercepto y $ α1 = (b - m)(1 - t) $ es la pendiente de la función
# 
# Entonces, como la condición de equilibrio es $Y = DA$, la ecuación del ingreso de equilibrio es:
# 
# $$ Y = (C_0 + I_0 + G_0 + X_0 - hr)+(b - m)*(1 - t)Y $$
# 
# $$ Y =  \frac{1}{1 - (b - m)(1 - t)} (C_0 + I_0 + G_0 + X_0 - hr) $$

# #### b)Replique el siguiente gráfico con todas descripciones encima de las rectas.

# In[6]:


# Parámetros

Y_size = 100 

Co = 35
Io = 40
Go = 70
Xo = 2
h = 0.7
b = 0.8 # b > m
m = 0.2
t = 0.3
r = 0.9

Y = np.arange(Y_size)

# Ecuación de la curva del ingreso de equilibrio

def DA_K(Co, Io, Go, Xo, h, r, b, m, t, Y):
    DA_K = (Co + Io + Go + Xo - h*r) + ((b - m)*(1 - t)*Y)
    return DA_K

DA_IS_K = DA_K(Co, Io, Go, Xo, h, r, b, m, t, Y)


# In[7]:


# Recta de 45°

a = 2.5 

def L_45(a, Y):
    L_45 = a*Y
    return L_45

L_45 = L_45(a, Y)


# In[8]:


# Gráfico

# Dimensiones del gráfico
y_max = np.max(DA_IS_K)
fig, ax = plt.subplots(figsize=(10, 8))

# Curvas a graficar
ax.plot(DA_IS_K, label = "DA", color = "C1") #Demanda agregada
ax.plot(L_45, color = "C2") #Línea de 45º

# Eliminar las cantidades de los ejes
ax.yaxis.set_major_locator(plt.NullLocator())   
ax.xaxis.set_major_locator(plt.NullLocator())

# Líneas punteadas punto de equilibrio
plt.axvline(x=70.5,  ymin= 0, ymax= 0.69, linestyle = ":", color = "grey")
plt.axhline(y=176, xmin= 0, xmax= 0.7, linestyle = ":", color = "grey")

plt.axvline(x=70.5,  ymin= 0, ymax= 0.69, linestyle = ":", color = "grey")
plt.axhline(y=145, xmin= 0, xmax= 1, linestyle = ":", color = "grey")

# Texto agregado
    # punto de equilibrio
plt.text(0, 180, '$DA^e$', fontsize = 11.5, color = 'black')
plt.text(72, 0, '$Y^e$', fontsize = 12, color = 'black')
plt.text(0, 152, '$α_o$', fontsize = 15, color = 'black')
    # línea 45º
plt.text(6, 4, '$45°$', fontsize = 11.5, color = 'black')
plt.text(2.5, -3, '$◝$', fontsize = 30, color = '#404040')
    # ecuaciones
plt.text(87, 203, '$DA = α_0 + α_1 Y$', fontsize = 11.5, color = '#3D59AB')
plt.text(80, 165, '$α_1 = (b-m)(1-t)$', fontsize = 11.5, color = 'green')
plt.text(73, 125, '$α_0 = C_o + I_o + G_o + X_o - hr$', fontsize = 11.5, color = 'green')

plt.text(92, 192, '$↓$', fontsize = 13, color = 'black')
plt.text(85, 135, '$↑$', fontsize = 13, color = 'black')

# Título y leyenda
ax.set(title="El ingreso de Equilibrio a Corto Plazo", xlabel= r'Y', ylabel= r'DA')
ax.legend() #mostrar leyenda

plt.show()


# ### 5.Estática comparativa en el modelo de Ingreso-Gasto keynesiano
# 
# ##### a) Analice una Política Fiscal Expansiva con aumento del Gasto del Gobierno. El análisis debe ser intuitivo, matemático y gráfico.

# - Intuición: 
# 
# $$ ↑Go → ↑G → ↑DA → DA > Y → ↑Y $$

# - Matemáticamente: $∆G_0 > 0  →  ¿∆Y?$
# 
# $$ Y = \frac{1}{1 - (b - m)(1 - t)} (C_0 + I_0 + G_0 + X_0 - hr) $$
# 
# 
# o, considerando el multiplicador keynesiano, $ k > 0 $:
# 
# $$ Y = k (C_0 + I_0 + G_0 + X_0 - hr) $$
# 
# 
# $$ ∆Y = k (∆C_0 + ∆I_0 + ∆G_0 + ∆X_0 - ∆hr) $$

# Pero, como no han habido cambios en $C_0$, $I_0$, $X_0$, $h$ ni $r$, entonces: 
# 
# $$∆C_0 = ∆I_0 = ∆X_0 = ∆h = ∆r = 0$$
# 
# $$ ∆Y = k (∆G_0) $$
# 
# 
# Sabiendo que $∆G_0 > 0 $ y que $k > 0$, la multiplicación de un número positivo con un número positivo dará otro número positivo:
# 
# $$ ∆Y = (+)(+) $$
# 
# $$ ∆Y > 0 $$
# 
# - Gráfico

# In[9]:


# Curva de ingreso de equilibrio ORIGINAL

# Parámetros
Y_size = 100 

Co = 35
Io = 40
Go = 70
Xo = 2
h = 0.7
b = 0.8
m = 0.2
t = 0.3
r = 0.9

Y = np.arange(Y_size)

    # Ecuación 
def DA_K(Co, Io, Go, Xo, h, r, b, m, t, Y):
    DA_K = (Co + Io + Go + Xo - h*r) + ((b - m)*(1 - t)*Y)
    return DA_K

DA_IS_K = DA_K(Co, Io, Go, Xo, h, r, b, m, t, Y)

#--------------------------------------------------
# NUEVA curva de ingreso de equilibrio

# Se define el parámetro cambiado
Go = 90

# Generar la ecuación con el nuevo parámetro
def DA_K(Co, Io, Go, Xo, h, r, b, m, t, Y):
    DA_K = (Co + Io + Go + Xo - h*r) + ((b - m)*(1 - t)*Y)
    return DA_K

DA_G = DA_K(Co, Io, Go, Xo, h, r, b, m, t, Y)


# In[10]:


# Gráfico
#Dimensiones del grafico
y_max = np.max(DA_IS_K)
fig, ax = plt.subplots(figsize=(10, 8))


# Curvas a graficar
ax.plot(Y, DA_IS_K, label = "DA", color = "#3D59AB") #curva ORIGINAL
ax.plot(Y, DA_G, label = "DA_G", color = "#9acd32", linestyle = 'dashed') #NUEVA curva
ax.plot(Y, L_45, color = "#404040") #línea de 45º

# Lineas punteadas
plt.axvline(x = 70.5, ymin= 0, ymax = 0.69, linestyle = ":", color = "grey")
plt.axhline(y = 176, xmin= 0, xmax = 0.68, linestyle = ":", color = "grey")
plt.axvline(x = 80,  ymin= 0, ymax = 0.78, linestyle = ":", color = "grey")
plt.axhline(y = 200.5, xmin= 0, xmax = 0.78, linestyle = ":", color = "grey")

# Texto agregado
plt.text(0, 136, '$DA^e$', fontsize = 11.5, color = 'black')
plt.text(0, 178, '$DA_G$', fontsize = 11.5, color = '#9bcc37')
plt.text(6, 4, '$45°$', fontsize = 11.5, color = 'black')
plt.text(2.5, -3, '$◝$', fontsize = 30, color = '#9acd32')
plt.text(66, 0, '$Y^e$', fontsize = 12, color = 'black')
plt.text(85, 0, '$Y_G$', fontsize = 12, color = '#9acd32')
plt.text(73, 45, '$→$', fontsize = 18, color = 'black')
plt.text(20, 160, '$↑$', fontsize = 18, color = 'black')

# Título y leyenda
ax.set(title = "Efectos de aumentar el Gasto de gobierno", xlabel = r'Y', ylabel = r'DA')
ax.legend()

plt.show()


# ##### b) Analice una Política fiscal expansiva con una reducción de la Tasa de Tributación ($Δt < 0$). El análisis debe ser intuitivo, matemático y gráfico.
# - Análisis intuitivo: ¿Contradicción?
# $$ t↓ → Co↑ → DA↑ → DA > Y → Y↑ $$
# $$ t↓ → M↑ → DA↓ → DA < Y → Y↓ $$

# - Análisis matemático: $∆t < 0  →  ¿∆Y?$

# In[11]:


Co, Io, Go, Xo, h, r, b, m, t = symbols('Co Io Go Xo h r b m t')

f = (Co + Io + Go + Xo - h*r)/(1-(b-m)*(1-t))

df_t = diff(f, t)
df_t #∆Y/∆t


# Considernado el diferencial de $∆t$:
# 
# $$ \frac{∆Y}{∆t} = \frac{(m-b)(Co + Go + Io + Xo - hr)}{(1-(1-t)(b-m)+1)^2} $$
# y:
# - Sabiendo que b > m, entonces $(m-b) < 0$
# - Los componentes autónomos no cambian: $∆C_0 = ∆I_0 = ∆X_0 = ∆h = ∆r = 0$
# - Cualquier número elevado al cuadrado será positivo: $ (1-(1-t)(b-m)+1)^2 > 0 $
# 
# Entonces:
# 
# $$ \frac{∆Y}{∆t} = \frac{(-)}{(+)} $$
# 
# Dado que $∆t < 0$, la división de un número positivo y otro nuúmero positivo da otro positivo:
# 
# $$ \frac{∆Y}{(-)} = \frac{(-)}{(+)} $$
# 
# $$ ∆Y = \frac{(-)(-)}{(+)} $$
# 
# $$ ∆Y > 0 $$

# - Análisis gráfico:

# In[12]:


# Curva de ingreso de equilibrio ORIGINAL

# Parámetros
t_size = 100 

Co = 35
Io = 40
Go = 70
Xo = 2
h = 0.7
b = 0.8
m = 0.2
t = 0.3 #tasa de tributación
r = 0.9

Y = np.arange(t_size)

# Ecuación 
def DA_K(Co, Io, Go, Xo, h, r, b, m, t, Y):
    DA_K = (Co + Io + Go + Xo - h*r) + ((b - m)*(1 - t)*Y)
    return DA_K

DA_IS_K = DA_K(Co, Io, Go, Xo, h, r, b, m, t, Y)

#--------------------------------------------------
# NUEVA curva de ingreso de equilibrio

# Definimos el parámetro cambiado
t = 0.01

# Generar la ecuación con el nuevo parámetros
def DA_K(Co, Io, Go, Xo, h, r, b, m, t, Y):
    DA_K = (Co + Io + Go + Xo - h*r) + ((b - m)*(1 - t)*Y)
    return DA_K

DA_T = DA_K(Co, Io, Go, Xo, h, r, b, m, t, Y)


# In[13]:


# Gráfico
y_max = np.max(DA_IS_K)
fig, ax = plt.subplots(figsize=(10, 8))

# Curvas a graficar
ax.plot(Y, DA_IS_K, label = "DA", color = "#3c9eff") #curva ORIGINAL
ax.plot(Y, DA_T, label = "DA_T", color = "#9acd32", linestyle = 'dashed') #NUEVA curva
ax.plot(Y, L_45, color = "#404040") #línea de 45º

# Lineas punteadas
plt.axvline(x = 70.5, ymin= 0, ymax = 0.69, linestyle = ":", color = "grey")
plt.axhline(y = 176, xmin= 0, xmax = 0.7, linestyle = ":", color = "grey")
plt.axvline(x = 77,  ymin= 0, ymax = 0.75, linestyle = ":", color = "grey")
plt.axhline(y = 192, xmin= 0, xmax = 0.75, linestyle = ":", color = "grey")

# Texto agregado
plt.text(0, 160, '$DA^e$', fontsize = 11.5, color = 'black')
plt.text(0, 200, '$DA_t$', fontsize = 11.5, color = '#9acd32')
plt.text(6, 4, '$45°$', fontsize = 11.5, color = 'black')
plt.text(2.5, -3, '$◝$', fontsize = 30, color = '#404040')
plt.text(68, 0, '$Y^e$', fontsize = 12, color = 'black')
plt.text(80, 0, '$Y_t$', fontsize = 12, color = '#9acd32')
plt.text(72, 45, '$→$', fontsize = 18, color = 'black')
plt.text(20, 180, '$↑$', fontsize = 18, color = 'black')

# Título y leyenda
ax.set(title = "Efectos de reducción de la Tasa de Tributación", xlabel = r'Y', ylabel = r'DA')
ax.legend()

plt.show()


# ### 6.Estática comparativa en el modelo de Ingreso-Gasto keynesiano con Regla Contracíclica.
# Utilizaremos un modelo con regla contracíclica. Este tipo de política fiscal hace que los auges y las depresiones no sean muy pronunciados. Se establece como una regla consistente en una variación del Gasto ($G$) (La magnitud es exactamente igual que en 5) en sentido contrario a la variación del Producto, Y. Uilice las siguientes ecuaciones y responda.

# ##### 6.1) Grafique la Funcion de demanda Agregada y la recta de 45 grados señalando los valores de intercepto y pendiente como en el apartado (4).

# In[14]:


# Parámetros

Y_size = 100 

Co = 35
Io = 40
Go = 70
g = 0.2 #solo valores entre 0-0.4
Xo = 2
h = 0.7
b = 0.8 # b > m
m = 0.2
t = 0.3
r = 0.9

Y = np.arange(Y_size)

# Ecuación de la curva del ingreso de equilibrio

def DA_C(Co, Io, Go, Xo, h, r, b, m, t, g, Y):
    DA_C = (Co  + Io + Go + Xo - h*r) + [(b-m)*(1-t)-g]*Y
    return DA_C

DA_Cont = DA_C(Co, Io, Go, Xo, h, r, b, m, t, g, Y)


# In[15]:


# Gráfico

# Dimensiones del gráfico
y_max = np.max(DA_Cont)
fig, ax = plt.subplots(figsize=(10, 8))

# Curvas a graficar
ax.plot(DA_Cont, label = "DA", color = "C3") #Demanda agregada
ax.plot(L_45, color = "#404040") #Línea de 45º

# Eliminar las cantidades de los ejes
ax.yaxis.set_major_locator(plt.NullLocator())   
ax.xaxis.set_major_locator(plt.NullLocator())

# Líneas punteadas punto de equilibrio
plt.axvline(x=64,  ymin= 0, ymax= 0.63, linestyle = ":", color = "grey")
plt.axhline(y=161, xmin= 0, xmax= 0.63, linestyle = ":", color = "grey")
plt.axhline(y=145, xmin= 0, xmax= 1, linestyle = ":", color = "grey")

# Texto agregado
    # punto de equilibrio
plt.text(0, 165, '$DA^e$', fontsize = 11.5, color = 'black')
plt.text(65, 0, '$Y^e$', fontsize = 12, color = 'black')
plt.text(0, 135, '$α_o$', fontsize = 15, color = 'black')
    # línea 45º
plt.text(6, 4, '$45°$', fontsize = 11.5, color = 'black')
plt.text(2.5, -3, '$◝$', fontsize = 30, color = '#404040')
    # ecuaciones
plt.text(82, 185, '$DA = α_0 + α_1 Y$', fontsize = 11.5, color = 'C3')
plt.text(75, 151, '$α_1 = [(b-m)(1-t)-g]$', fontsize = 11.5, color = 'black')
plt.text(73, 125, '$α_0 = C_o + I_o + G_o + X_o - hr$', fontsize = 11.5, color = 'black')

plt.text(87, 175, '$↓$', fontsize = 13, color = 'black')
plt.text(85, 135, '$↑$', fontsize = 13, color = 'black')

# Título y leyenda
ax.set(title="El ingreso de Equilibrio a Corto Plazo con regla contracíclica", xlabel= r'Y', ylabel= r'DA')
ax.legend() #mostrar leyenda

plt.show()


# #### 6.2) Encuentre el nivel de Ingreso de equilibrio Ye 
# La ecuación de la Demanda Agregada es: 
# 
# $$ DA = (C_0 + I_0 + G_0 + X_0 - hr) + ((b - m)(1 - t)-g)Y $$
# 
# De forma corta:
# 
# $$ DA = α_0 + α_1Y $$
# 
# Donde $ α_0 = (C_0 + I_0 + G_0 + X_0 -hr)$ es el intercepto y $ α_1 = ((b - m)(1 - t)-g) $ es la pendiente de la función
# 
# Considerando la condición de equilibrio $Y = DA$, la ecuación del ingreso de equilibrio es:
# 
# $$ Y^e = (C_0 + I_0 + G_0 + X_0 - hr)+((b - m)*(1 - t)-g)Y $$
# 
# $$ Y^e=  \frac{1}{1 - (b - m)(1 - t)+ g} (C_0 + I_0 + G_0 + X_0 - hr) $$

# #### 6.3) Analice una Política Fiscal Expansiva con aumento del Gasto del Gobierno. El análisis debe ser intuitivo, matemático y gráfico.

# - Intuición: 
# 
# $$ ↑Go → ↑(G_0-gY) → ↑G → ↑DA → DA > Y → ↑Y $$

# - Matemáticamente: $∆G_0 > 0  →  ¿∆Y?$
# 
# $$ Y = \frac{1}{1 - (b - m)(1 - t) + g} (C_0 + I_0 + G_0 + X_0 - hr) $$
# 
# y, considerando el multiplicador keynesiano, $ k > 0 $:
# 
# $$ Y = k(C_0 + I_0 + G_0 + X_0 - hr) $$

# $$ ∆Y = k(∆C_0 + ∆I_0 + ∆G_0 + ∆X_0 - ∆h∆r) $$
# 
# Pero, como no han habido cambios en $C_0$, $I_0$, $X_0$, $h$ ni $r$, entonces: 
# 
# $$∆C_0 = ∆I_0 = ∆X_0 = ∆h = ∆r = 0$$
# 
# $$ ∆Y = k(∆G_0) $$
# 
# Sabiendo que $∆G_0 > 0 $ y que $k > 0$, entonces la multiplicación de un número positivo y otro número positivo dará como resultado otro número positivo:
# 
# $$ \frac{∆Y}{(+)} = (+) $$
# 
# $$ ∆Y = (+)(+) $$
# $$ ∆Y > 0 $$

# - Gráfico 

# In[16]:


# Curva de ingreso de equilibrio ORIGINAL

# Parámetros
Y_size = 100 

Co = 35
Io = 40
Go = 70
Xo = 2
h = 0.7
b = 0.8
m = 0.2
t = 0.3
r = 0.9
g = 0.3

Y = np.arange(Y_size)

    # Ecuación 
def DA_K(Co, Io, Go, Xo, h, r, b, m, t, g, Y):
    DA_K = (Co + Io + Go + Xo - h*r) + ((b - m)*(1 - t)-g)*Y
    return DA_K

DA_IS_G = DA_K(Co, Io, Go, Xo, h, r, b, m, t, g, Y)


#--------------------------------------------------
# NUEVA curva de ingreso de equilibrio

    # Definir SOLO el parámetro cambiado
Go = 90

# Generar la ecuación con el nuevo parámetro
def DA_K(Co, Io, Go, Xo, h, r, b, m, t, g, Y):
    DA_K = (Co + Io + Go + Xo - h*r) + ((b - m)*(1 - t)-g)*Y
    return DA_K

DA_GG = DA_K(Co, Io, Go, Xo, h, r, b, m, t, g, Y)


# In[17]:


# Gráfico
#Dimensiones del grafico
y_max = np.max(DA_IS_G)
fig, ax = plt.subplots(figsize=(10, 8))

# Curvas a graficar
ax.plot(Y, DA_IS_G, label = "DA", color = "#3D59AB") #curva ORIGINAL
ax.plot(Y, DA_GG, label = "DA_G", color = "#9acd32", linestyle = 'dashed') #NUEVA curva
ax.plot(Y, L_45, color = "#404040") #línea de 45º

# Lineas punteadas
plt.axvline(x = 61.5, ymin= 0, ymax = 0.61, linestyle = ":", color = "grey")
plt.axhline(y = 155, xmin= 0, xmax = 0.61, linestyle = ":", color = "grey")
plt.axvline(x = 70.5,  ymin= 0, ymax = 0.70, linestyle = ":", color = "grey")
plt.axhline(y = 176, xmin= 0, xmax = 0.78, linestyle = ":", color = "grey")

# Texto agregado
plt.text(0, 150, '$DA^e$', fontsize = 11.5, color = 'black')
plt.text(0, 180, '$DA_G$', fontsize = 11.5, color = '#9acd32')
plt.text(6, 4, '$45°$', fontsize = 11.5, color = 'black')
plt.text(2.5, -3, '$◝$', fontsize = 30, color = '#404040')
plt.text(52, 0, '$Y^e$', fontsize = 12, color = 'black')
plt.text(72, 0, '$Y_G$', fontsize = 12, color = '#9acd32')
plt.text(66, 45, '$→$', fontsize = 18, color = 'black')
plt.text(20, 155, '$↑$', fontsize = 18, color = 'black')

# Título y leyenda
ax.set(title = "Efectos del aumento del Gasto de Gobierno", xlabel = r'Y', ylabel = r'DA')
ax.legend()

plt.show()


# #### 6.4) ¿Cuál es el papel que juega el parametro $g$ en el multiplicador keynesiano?
# El parámetro g de la regla contracíclica aumenta la magnitud del denominador del multiplicador keynesiano, por ende, reduce el tamaño del multiplicador keynesiano y al reducir el tamaño, la pendiente de la Demanda agregada también se reduce.
# 
# Pues:
# $$ Y = \frac{1}{1 - (b - m)(1 - t) + g} (C_0 + I_0 + G_0 + X_0 - hr) $$
# 
# y:
# 
# $$ k= \frac{1}{1 - (b - m)(1 - t) + g} $$

# #### 6.5) ¿El tamaño del efecto de la politica fiscal encontrado en 6 es el mismo que en el apartado 5?
# Aunque en ambos casos (apartado 5 y 6) el gasto aumenta en la misma magnitud (20), no podemos decir que el efecto es el mismo, pues, teoricamente sabemos que en una política fiscal contracíclica la pendiente de la curva DA se reduce. Esto se confirma mediante los gráficos, ya que en el apartado 5 la pendiente de la curva DA es más inclinada que en el apartado 6.
# 
# Esto se debe a que el valor del multiplicador keynesiano se redujo por la adición de g en el denominador. Por tanto, si es más pequeño, el impacto de una política fiscal expansiva  será menor cuando se utilice la regla contracíclica (la adición de g). De allí que la pendiente de la curva de la Demanda Agregada sea menor en el apartado 6).

# #### 6.6) Analice una crisis mundial que reduce nuestras exportaciones ($∆X_0 < 0$). El análisis debe ser intuitivo, matemático y gráfico.

# - Análisis Intuitivo: 
# 
# $$ ↓Xo → ↓X → ↓DA → DA < Y → ↓Y $$

# - Matemáticamente: $∆X_0 < 0  →  ¿∆Y?$
# 
# $$ Y = \frac{1}{1 - (b - m)(1 - t) + g} (C_0 + I_0 + G_0 + X_0 - hr) $$
# 
# y, considerando el multiplicador keynesiano, $ k > 0 $:
# 
# $$ Y = k(C_0 + I_0 + G_0 + X_0 - hr) $$

# $$ ∆Y = k(∆C_0 + ∆I_0 + ∆G_0 + ∆X_0 - ∆h∆r) $$
# 
# Pero, como no cambiaron $C_0$, $I_0$, $G_0$, $h$ ni $r$, entonces: 
# 
# $$∆C_0 = ∆I_0 = ∆G_0 = ∆h = ∆r = 0$$
# 
# $$ ∆Y = k(∆X_0) $$
# 
# Sabiendo que $∆X_0 < 0 $ y que $k > 0$ , la multiplicación de un número positivo con un número negativo dará otro negativo:
# 
# $$ \frac{∆Y}{(-)} = (+) $$
# 
# $$ ∆Y = (-)(+) $$
# $$ ∆Y < 0 $$

# 
# - Gráfico

# In[18]:


# Curva de ingreso de equilibrio ORIGINAL

# Parámetros
Y_size = 100 

Co = 35
Io = 40
Go = 70
Xo = 20
h = 0.7
b = 0.8
m = 0.2
t = 0.3
r = 0.9
g = 0.3
Y = np.arange(Y_size)

    # Ecuación 
def DA_K(Co, Io, Go, Xo, h, r, b, m, t, g, Y):
    DA_K = (Co + Io + Go + Xo - h*r) + (((b - m)*(1 - t)-g)*Y)
    return DA_K

DA_IS_G = DA_K(Co, Io, Go, Xo, h, r, b, m, t, g, Y)


#--------------------------------------------------
# NUEVA curva de ingreso de equilibrio

# Definimos el parámetro cambiado Xo
Xo = 4

# Generar la ecuación con el nuevo parámetro
def DA_K(Co, Io, Go, Xo, h, r, b, m, t, g, Y):
    DA_K = (Co + Io + Go + Xo - h*r) + ((b - m)*(1 - t)-g)*Y
    return DA_K

DA_x = DA_K(Co, Io, Go, Xo, h, r, b, m, t, g, Y)


# In[19]:


# Gráfico
y_max = np.max(DA_IS_G)
fig, ax = plt.subplots(figsize=(10, 8))


# Curvas a graficar
ax.plot(Y, DA_IS_G, label = "DA", color = "C1") #curva ORIGINAL
ax.plot(Y, DA_x, label = "DA_X", color = "C3", linestyle = 'dashed') #NUEVA curva
ax.plot(Y, L_45, color = "#404040") #línea de 45º

# Lineas punteadas
plt.axvline(x = 69.2, ymin= 0, ymax = 0.68, linestyle = ":", color = "grey")
plt.axhline(y = 173.2, xmin= 0, xmax = 0.68, linestyle = ":", color = "grey")
plt.axvline(x = 63,  ymin= 0, ymax = 0.62, linestyle = ":", color = "grey")
plt.axhline(y = 157, xmin= 0, xmax = 0.62, linestyle = ":", color = "grey")

# Texto agregado
plt.text(0, 180, '$DA^e$', fontsize = 11.5, color = 'black')
plt.text(0, 125, '$DA_X$', fontsize = 11.5, color = 'C1')
plt.text(6, 4, '$45°$', fontsize = 11.5, color = 'black')
plt.text(2.5, -3, '$◝$', fontsize = 30, color = '#404040')
plt.text(72, 0, '$Y^e$', fontsize = 12, color = 'blue')
plt.text(56, 0, '$Y_X$', fontsize = 12, color = 'C1')
plt.text(64, 100, '$←$', fontsize = 18, color = 'black')
plt.text(20, 157, '$↓$', fontsize = 18, color = 'black')

# Título y leyenda
ax.set(title = "Efectos de reducción de las exportaciones $(X_0)$", xlabel = r'Y', ylabel = r'DA')
ax.legend()

plt.show()

